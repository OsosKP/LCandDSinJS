const board =
  [["5", "3", ".", ".", "7", ".", ".", ".", "."]
    , ["6", ".", ".", "1", "9", "5", ".", ".", "."]
    , [".", "9", "8", ".", ".", ".", ".", "6", "."]
    , ["8", ".", ".", ".", "6", ".", ".", ".", "3"]
    , ["4", ".", ".", "8", ".", "3", ".", ".", "1"]
    , ["7", ".", ".", ".", "2", ".", ".", ".", "6"]
    , [".", "6", ".", ".", ".", ".", "2", "8", "."]
    , [".", ".", ".", "4", "1", "9", ".", ".", "5"]
    , [".", ".", ".", ".", "8", ".", ".", "7", "9"]];

const board2 =
  [[".", ".", "4", ".", ".", ".", "6", "3", "."]
    , [".", ".", ".", ".", ".", ".", ".", ".", "."]
    , ["5", ".", ".", ".", ".", ".", ".", "9", "."]
    , [".", ".", ".", "5", "6", ".", ".", ".", "."]
    , ["4", ".", "3", ".", ".", ".", ".", ".", "1"]
    , [".", ".", ".", "7", ".", ".", ".", ".", "."]
    , [".", ".", ".", "5", ".", ".", ".", ".", "."]
    , [".", ".", ".", ".", ".", ".", ".", ".", "."]
    , [".", ".", ".", ".", ".", ".", ".", ".", "."]]

const isValid = (board) => {
  for (let i = 0; i < 9; i++) {
    const rows = new Set(),
      cols = new Set(),
      boxes = new Set();

    for (let j=0; j<9; j++) {
      const row = board[i][j];
      const col = board[j][i];
      // i=0
      // j=0  [3*0+0][3*0+0] = [0,0]
      // j=1  [3*0+0][3*0+1] = [0,1]
      // j=2  [3*0+0][3*0+2] = [0,2]
      // j=3  [3*0+1][3*0+0] = [1,0]
      // j=4  [3*0+1][3*0+1] = [1,0]
      // j=5  [3*0+1][3*0+2] = [1,2]
      // j=6  [3*0+2][3*0+0] = [2,0]
      // j=7  [3*0+2][3*0+1] = [2,1]
      // j=8  [3*0+2][3*0+2] = [2,2]
      // i=1
      // j=0  [3*0+0][3*1+0] = [0,3]
      // j=1  [3*0+0][3*1+1] = [0,4]
      // j=2  [3*0+0][3*1+2] = [0,5]
      // j=3  [3*0+1][3*1+0] = [1,3]
      // j=4  [3*0+1][3*1+1] = [1,4]
      // j=5  [3*0+1][3*1+2] = [1,5]
      // j=6  [3*0+2][3*1+0] = [2,3]
      // j=7  [3*0+2][3*1+1] = [2,4]
      // j=8  [3*0+2][3*1+2] = [2,5]
      const box = board[3*Math.floor(i/3)+Math.floor(j/3)][3*(i%3)+(j%3)];

      if (row !== ".") {
        if (rows.has(row)) return false;
        else rows.add(row);
      }

      if (col !== ".") {
        if (cols.has(col)) return false;
        else cols.add(col);
      }

      if (box !== ".") {
        if (boxes.has(box)) return false;
        else boxes.add(box);
      }
    }
  }
  return true;
}

console.log(isValid(board));
console.log(isValid(board2));